{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Responsive Bottom Nav</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-table@1.24.1/dist/bootstrap-table.min.css">
  </head>
  <body>
   <nav class="navbar navbar-expand-lg ">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">CustomerProfile</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Contact</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Person</a>
              </li>
               <li class="nav-item">
                <a class="nav-link" href="#">Admin</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" aria-disabled="true">Disabled</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    <div class="container">
      <div class="row">
        <div class="col-12">
          <h1 class="mt-5">Contact Management</h1>
          <p class="lead">
            This is an example of a contact management page that allows you to
            view and manage customer contacts. You can add, edit, or delete
            contacts as needed.
          </p>
        </div>
      </div>
      <div class="row align-items-center">
        
          <div class="col">
            <label for="input_firstname" class="col-form-label">First Name</label>
            <input type="text" id="input_firstname" class="form-control" >
          </div>
          <div class="col">
            <label for="input_lastname" class="col-form-label">Last Name</label>
            <input type="text" id="input_lastname" class="form-control" >
          </div>
          <div class="col">
            <label for="input_nickname" class="col-form-label">Nick Name</label>
            <input type="text" id="input_nickname" class="form-control" >
          </div>
      </div>
      <div class="row align-items-center"> 
         <div class="col">
            <label for="input_gender" class="col-form-label">Gender</label>
            <select class="form-select" aria-label="Gender select" id="input_gender">
              <option selected>Open this select menu</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select>
        </div>
        <div class="col">
            <label for="input_address" class="col-form-label">Birthday</label>
            <input type="text" id="input_address" class="form-control" >
        </div>
      </div>

       <div class="row align-items-center"> 
        
        <div class="col">
            <label for="input_address" class="col-form-label">Address</label>
            <input type="text" id="input_address" class="form-control" >
        </div>
      </div>
      <div class="row align-items-center"> 
        <div class="col">
            <label for="input_province" class="col-form-label">Province</label>
            <select class="form-select" aria-label="Province select" id="input_province">
              <option selected>Open this select menu</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
        </div>
          <div class="col">
            <label for="input_district" class="col-form-label">District</label>
            <select class="form-select" aria-label="District select" id="input_district">
              <option selected>Open this select menu</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
        </div>
          <div class="col">
            <label for="input_subdistrict" class="col-form-label">Subdistrict</label>
            <select class="form-select" aria-label="Subdistrict select" id="input_subdistrict">
              <option selected>Open this select menu</option>
              <option value="1">One</option>
              <option value="2">Two</option>
              <option value="3">Three</option>
            </select>
        </div>
         <div class="col">
            <label for="input_subdistrict" class="col-form-label">Post Code</label>
            <input type="text" id="input_postcode" class="form-control" >
        </div>
      </div>
      <div class="row align-items-center"> 
          <div class="col">
            <label for="input_mobile" class="col-form-label">Mobile</label>
            <input type="text" id="input_mobile" class="form-control" >
        </div>
        <div class="col">
            <label for="input_email" class="col-form-label">Email</label>
            <input type="email" id="input_email" class="form-control" >
        </div>
      </div>
 <!-- <div class="col-auto">
    <span id="passwordHelpInline" class="form-text">
      Must be 8-20 characters long.
    </span>
  </div> -->
  </div>
      

    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-table@1.24.1/dist/bootstrap-table.min.js"></script>
    <script src="../../static/js/fn_address.js"></script>
      
 
  </body>
  <script>
    $(document).ready(function () {
      // Initialize Bootstrap Table
      $('#table').bootstrapTable({
        url: 'data.json', // URL to fetch data
        columns: [
          {
            field: 'id',
            title: 'ID',
          },
          {
            field: 'name',
            title: 'Name',
          },
          {
            field: 'email',
            title: 'Email',
          },
        ],
      });
    });
   

 $(document).ready(function(){
      $.ajax({
          url: "{% url 'api:provinceAll' %}",
          method: 'GET',
          success: function(data){
              let $selectProvince = $('#cust_province');
              $.each(data, function(index, province){
                  $selectProvince.append('<option value="'+ province.id +'">'+ province.name +'</option>');
              });
          },
          error: function(xhr, status, error){
              console.error('Error finding provinces:', error);
          }
      });
      
      $('#cust_province').change(function(){
          let provinceId = $(this).val();
          let provinceName = $("#cust_province option:selected").text();
          $("#selected_province_name").val(provinceName);
          $("#cust_province_id").val(provinceId);
          $("#cust_district").empty().append('<option value selected disabled hidden>- กรุณาเลือกอำเภอ -</option>'); 
          $("#cust_subdistrict").empty().append('<option value selected disabled hidden>- ตำบล -</option>'); 

          $("#selected_district_name").val("");
          $("#cust_district_id").val("");
          $("#cust_district").val("");
          $("#selected_subdistrict_name").val("");
          $("#cust_subdistrict_id").val("");
          $("#cust_subdistrict").val("");
          $("#cust_postcode").val("");
          $("#cust_postalcode").val("");

          $.ajax({
              url: "{% url 'api:districtWithProvince' %}",
              method: 'POST',
              data: {
                  provinceId: provinceId
              },
              success: function(data){
                  let $selectDistrict = $('#cust_district');
                  $.each(data, function(index, district){
                      $selectDistrict.append('<option value="'+ district.id +'">'+ district.name +'</option>');
                  });
              },
              error: function(xhr, status, error){
                  console.error('Error finding districts:', error);
              }
          });
      });


      $('#cust_district').change(function(){
        let districtId = $(this).val();
        let districtName = $("#cust_district option:selected").text();
        $("#selected_district_name").val(districtName);
        $("#cust_district_id").val(districtId);
        $("#cust_subdistrict").empty().append('<option value selected disabled hidden>- กรุณาเลือกตำบล -</option>'); 


        $("#selected_subdistrict_name").val("");
        $("#cust_subdistrict_id").val("");
        $("#cust_subdistrict").val("");
        $("#cust_postcode").val("");
        $("#cust_postalcode").val("");

        $.ajax({
            url: "{% url 'api:subdistrictWithProvince' %}",
            method: 'POST',
            data: {
                districtId: districtId
            },
            success: function(data){
                let $selectSubDistrict = $('#cust_subdistrict');
                $.each(data, function(index, subdistrict){
                    $selectSubDistrict.append('<option value="'+ subdistrict.id +'">'+ subdistrict.name +'</option>');
                });
            },
            error: function(xhr, status, error){
                console.error('Error finding subdistricts:', error);
            }
        });
    });


    $('#cust_subdistrict').change(function(){
      let SubdistrictId = $(this).val();
      let subdistrictName = $("#cust_subdistrict option:selected").text();
      $("#selected_subdistrict_name").val(subdistrictName);
      $("#cust_subdistrict_id").val(SubdistrictId);
      //$("#cust_postcode").empty().append('<option value selected disabled hidden>- กรุณาเลือกตำบล -</option>'); 
      $("#cust_postcode").val("");
      $("#cust_postalcode").val("");

  });

  });

  </script>
</html>
